import{S as m,N as p,a as g,i as f}from"./assets/vendor-Dsc43iqD.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();const t={favoritesButton:document.querySelector("[data-add-favorites]"),cityInput:document.querySelector("[data-input-city]"),favoritiesList:document.querySelector("[data-favorities-list]"),swiperNavButtons:document.querySelectorAll(".header-wrapper-nav-button"),searchButton:document.querySelector("[data-search-button]"),curentTemp:document.querySelector(".days-current-temp"),currentLocation:document.querySelector(".days-city-title"),currentLocationFive:document.querySelector(".five-days-city-title"),daysWrapper:document.querySelector(".days-wrapper"),maxTempText:document.querySelector("[data-max-temp]"),minTempText:document.querySelector("[data-min-temp]"),currentDate:document.querySelector(".date-day"),currentDay:document.querySelector(".day-week"),currentMonth:document.querySelector(".date-month"),currentTime:document.querySelector(".date-time"),sunRise:document.querySelector(".sunrise"),sunSet:document.querySelector(".sunset"),sunBlock:document.querySelector(".sun-rise-set"),switchFiveDays:document.querySelector("[data-switch-five-days]"),switchOneDay:document.querySelector("[data-switch-one-day]"),homeSection:document.querySelector(".home"),citeBlock:document.querySelector("[data-cite-block]"),dateBlock:document.querySelector(".date-wrapper"),fiveDayContainer:document.querySelector(".five-day-container"),fiveDaysCityWeekday:document.querySelectorAll(".five-days-city-list-weekday")};function h(){new m("[data-swiper-cities]",{modules:[p],spaceBetween:10,slidesPerView:"auto",navigation:{nextEl:"[data-swiper-right]",prevEl:"[data-swiper-left]"}})}const v="7aa569d556494f818ff173014251206";async function S(e,n){return(await g.get(`https://api.weatherapi.com/v1/forecast.json?days=${n}`,{params:{key:v,q:e}})).data}let u=1;const y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function l(){const e=JSON.parse(localStorage.getItem("cities"));if(w(e),!e||e.length===0){t.favoritiesList.innerHTML="";return}t.favoritiesList.innerHTML=L(e),h()}function w(e){if(!e||e.length<3){t.swiperNavButtons.forEach(n=>n.style.display="none");return}t.swiperNavButtons.forEach(n=>n.style.display="block")}function L(e){return e.map(n=>`<li class="header-favority-list-item swiper-slide">
                        <span class="header-favority-list-item-text">${n}</span>
                        <button type="button" class="header-favority-list-item-button" data-city-del-button="${n}">
                            <svg>
                                <use href="./symbol-defs.svg#close"></use>
                            </svg>
                        </button>
                     </li>`).join("")}async function D(){const e=await d();e&&T(e)}function C(e){return`${e[0].toUpperCase()}${e.slice(1).toLowerCase()}`}function T(e){const n=JSON.parse(localStorage.getItem("cities"))||[];n.includes(e)||(n.push(e),localStorage.setItem("cities",JSON.stringify(n)),q(),l())}function q(){f.success({message:"City added to favorites",maxWidth:"200px",position:"topRight",messageSize:"10",icon:"",progressBar:!1,timeout:1e3,backgroundColor:"transparent",close:!1,messageColor:"green"})}function x(){f.error({message:"City not found",maxWidth:"200px",position:"topRight",messageSize:"10",icon:"",progressBar:!1,timeout:1e3,backgroundColor:"transparent",close:!1,messageColor:"red"})}function k(e){const n=e.target.closest("[data-city-del-button]")?e.target.closest("[data-city-del-button]"):e.target.closest(".header-favority-list-item-text");if(n){if(n.tagName==="BUTTON"){b(n);return}t.cityInput.value=n.textContent,d()}}function b(e){const n=e.dataset.cityDelButton,i=JSON.parse(localStorage.getItem("cities"));localStorage.setItem("cities",JSON.stringify(i.filter(s=>s!==n))),l()}async function d(){const e=t.cityInput.value.trim();if(!e)return;const n=C(e);try{const i=await S(n,u);return console.log(i),B(i),n}catch{return x(),!1}finally{t.cityInput.value=""}}function B(e){O(e.current.temp_c),N(e.location),E(e.current.cloud),F(e.forecast.forecastday[0].day.maxtemp_c),W(e.forecast.forecastday[0].day.mintemp_c),P(e.forecast.forecastday[0].astro.sunrise),R(e.forecast.forecastday[0].astro.sunset),t.sunBlock.style.display="flex"}function M(){const e=new Date;$(e.getDate()),J(e.getDay()),A(e.getMonth()),setInterval(()=>{H(new Date)},1e3)}function O(e){t.curentTemp.innerHTML=e}function N({name:e,country:n}){t.currentLocation.innerHTML=`${e}, ${n}`,t.currentLocationFive.innerHTML=`${e}, ${n}`}function E(e){e>=85?a("./cloudy.png","cloudy"):e>=30?a("./cloudy-sun.png","cloudy-sun"):a("./sun.png","sun")}function a(e,n){I();const i=document.createElement("img");i.src=e,i.alt=n,i.classList.add("days-cloudy"),t.daysWrapper.prepend(i)}function I(){const e=document.querySelector(".days-cloudy");e&&e.remove()}function F(e){t.maxTempText.textContent=`${e}°`}function W(e){t.minTempText.textContent=`${e}°`}function $(e){const n=e%10===1&&e!==11?"st":e%10===2&&e!==12?"nd":e%10===3&&e!==13?"rd":"th";t.currentDate.innerHTML=`${e}<sup>${n}</sup>`}function J(e){t.currentDay.textContent=y[e],t.fiveDaysCityWeekday.forEach((n,i)=>{n.textContent=y[e+i]})}function A(e){const n=["January","February","March","April","May","June","July","August","September","October","November","December"];t.currentMonth.textContent=n[e]}function H(e){const n=e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});t.currentTime.textContent=n}function P(e){t.sunRise.textContent=e.split(" ")[0]}function R(e){t.sunSet.textContent=e.split(" ")[0]}function z(){t.daysWrapper.style.display="none",t.homeSection.classList.add("home-five"),t.switchOneDay.classList.remove("is-active"),t.switchFiveDays.classList.add("is-active"),t.citeBlock.style.display="none",t.dateBlock.style.display="none",t.fiveDayContainer.style.display="block",u=3}function _(){t.daysWrapper.style.display="block",t.homeSection.classList.remove("home-five"),t.switchOneDay.classList.add("is-active"),t.switchFiveDays.classList.remove("is-active"),t.citeBlock.style.display="block",t.dateBlock.style.display="block",t.fiveDayContainer.style.display="none",u=1}t.favoritesButton.addEventListener("click",D);t.favoritiesList.addEventListener("click",k);t.searchButton.addEventListener("click",d);t.switchFiveDays.addEventListener("click",z);t.switchOneDay.addEventListener("click",_);l();M();
//# sourceMappingURL=index.js.map
